From a41dabe711c5d9c041cfb6e675bbb6825ec708d1 Mon Sep 17 00:00:00 2001
From: Martino Facchin <m.facchin@arduino.cc>
Date: Fri, 17 Mar 2023 10:41:58 +0100
Subject: [PATCH] Nicla Vision: add HRTIM pinmux

---
 .../TARGET_NICLA_VISION/PeripheralPins.c         | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/targets/TARGET_STM/TARGET_STM32H7/TARGET_STM32H747xI/TARGET_NICLA_VISION/PeripheralPins.c b/targets/TARGET_STM/TARGET_STM32H7/TARGET_STM32H747xI/TARGET_NICLA_VISION/PeripheralPins.c
index c6e8b9cc07..12956b4e28 100644
--- a/targets/TARGET_STM/TARGET_STM32H7/TARGET_STM32H747xI/TARGET_NICLA_VISION/PeripheralPins.c
+++ b/targets/TARGET_STM/TARGET_STM32H7/TARGET_STM32H747xI/TARGET_NICLA_VISION/PeripheralPins.c
@@ -289,6 +289,22 @@ MBED_WEAK const PinMap PinMap_PWM[] = {
     {NC, NC, 0}
 };
 
+//*** PWM_HRTIM ***
+
+MBED_WEAK const PinMap PinMap_PWM_HRTIM[] = {
+    {PA_8,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHB, 1)}, // HRTIM_CHB2
+    {PA_9,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHC, 0)}, // HRTIM_CHC1
+    {PA_10,      PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHC, 1)}, // HRTIM_CHC2
+    {PA_11,      PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHD, 0)}, // HRTIM_CHD1
+    {PA_12,      PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHD, 1)}, // HRTIM_CHD2
+    {PC_6,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF1_HRTIM1, CHA, 0)}, // HRTIM_CHA1
+    {PC_7,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF1_HRTIM1, CHA, 1)}, // HRTIM_CHA2
+    {PC_8,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF1_HRTIM1, CHB, 0)}, // HRTIM_CHB1
+    {PG_6,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHE, 0)}, // HRTIM_CHE1
+    {PG_7,       PWM_I,  STM_PIN_DATA_EXT(STM_MODE_AF_PP, GPIO_PULLUP, GPIO_AF2_HRTIM1, CHE, 1)}, // HRTIM_CHE2
+    {NC, NC, 0}
+};
+
 //*** SERIAL ***
 
 MBED_WEAK const PinMap PinMap_UART_TX[] = {
-- 
2.39.1

